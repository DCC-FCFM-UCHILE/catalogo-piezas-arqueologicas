"use strict";(self.webpackChunkcatalogomuseo=self.webpackChunkcatalogomuseo||[]).push([[315],{6315:(e,t,i)=>{i.r(t),i.d(t,{default:()=>le});var n=i(5043),r=i(5865),a=i(1906),s=i(1637),l=i(3845),c=i(7121),o=i(8304),d=i(3544),p=i(7111),h=i(4535),u=i(4546),g=i(6026),x=i(739),m=i(1589),j=i(2717),f=i(7739),A=i(7392),b=i(4002),y=i(6461),v=i(5973),w=i(5624),k=i(5292),C=i(6037),P=i(7943),z=i(9408),F=i(579);const S=(0,h.Ay)(g.Hl)({backgroundColor:"#2e2d2c"}),E=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{width:"100%",height:t.spacing(75),position:"relative"}})),D=(0,h.Ay)(A.A)({color:"white"}),I=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{backgroundColor:"transparent",height:"50px",position:"absolute",width:"100%",maxWidth:"100%",boxSizing:"border-box",display:"flex",flexDirection:"row",paddingLeft:"2%",paddingRight:"2%",paddingTop:"1%",justifyContent:"flex-start",top:0}})),L=e=>{let{objPath:t,mtlPath:i}=e;const r=(0,u.F)(m.V,i);r.side=z.DoubleSide;const a=(0,u.F)(x.L,t,(e=>{r.preload(),e.setMaterials(r)})),s=(0,n.useRef)(null),l=(0,n.useRef)(null),[c,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{function e(){o(null!==document.fullscreenElement)}return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]);return(0,F.jsxs)(E,{ref:s,id:"canvas-container",children:[(0,F.jsxs)(S,{camera:{fov:25,position:[0,0,-500]},children:[(0,F.jsx)("ambientLight",{intensity:4})," ",(0,F.jsx)("primitive",{position:[0,0,0],object:a})," ",(0,F.jsx)(j.N,{ref:l})," "]}),(0,F.jsxs)(I,{children:[c?(0,F.jsx)(f.A,{title:"Pantalla normal",arrow:!0,PopperProps:{container:s.current},placement:"bottom-start",children:(0,F.jsx)(D,{onClick:()=>{document.exitFullscreen()},children:(0,F.jsx)(C.A,{})})}):(0,F.jsx)(f.A,{title:"Pantalla completa",arrow:!0,PopperProps:{container:s.current},placement:"bottom-start",children:(0,F.jsx)(D,{onClick:()=>{s.current.requestFullscreen()},children:(0,F.jsx)(y.A,{})})}),(0,F.jsx)(f.A,{placement:"bottom-start",title:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("h3",{children:"Ayuda:"}),(0,F.jsxs)("p",{children:[(0,F.jsx)(b.A,{})," Orbitar: Click izquierdo"]}),(0,F.jsxs)("p",{children:[(0,F.jsx)(w.A,{})," Zoom: scroll o rueda"]}),(0,F.jsxs)("p",{children:[(0,F.jsx)(k.A,{})," Arrastrar: Click derecho"]})]}),arrow:!0,PopperProps:{container:s.current},children:(0,F.jsx)(D,{children:(0,F.jsx)(v.A,{})})}),(0,F.jsx)(f.A,{title:"Ampliar Zoom",arrow:!0,PopperProps:{container:s.current},children:(0,F.jsx)(D,{onClick:()=>{const e=l.current.object.position,t=.9*e.x,i=.9*e.y,n=.9*e.z;l.current.object.position.set(t,i,n),l.current.update()},children:(0,F.jsx)(w.A,{})})}),(0,F.jsx)(f.A,{title:"Alejar Zoom",arrow:!0,PopperProps:{container:s.current},children:(0,F.jsx)(D,{onClick:()=>{const e=l.current.object.position,t=1.1*e.x,i=1.1*e.y,n=1.1*e.z;l.current.object.position.set(t,i,n),l.current.update()},children:(0,F.jsx)(P.A,{})})})]})]})},R=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{width:"100%",height:t.spacing(75),position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"black",overflow:"hidden"}})),T=(0,h.Ay)("img")((()=>({width:"100%",height:"100%",objectFit:"contain"}))),q=(0,h.Ay)(A.A)({color:"white",position:"absolute",zIndex:1,top:10,right:10}),B=e=>{let{imagePath:t}=e;const i=(0,n.useRef)(null),[r,a]=(0,n.useState)(!1);(0,n.useEffect)((()=>{function e(){a(null!==document.fullscreenElement)}return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]);return(0,F.jsxs)(R,{ref:i,children:[(0,F.jsx)(T,{src:t,alt:"Artifact"}),(0,F.jsx)("div",{children:r?(0,F.jsx)(q,{onClick:()=>{document.exitFullscreen()},children:(0,F.jsx)(C.A,{})}):(0,F.jsx)(q,{onClick:()=>{i.current.requestFullscreen()},children:(0,F.jsx)(y.A,{})})})]})};var W=i(835),Z=i(9194),V=i(2768),H=i(4565),M=i(7358);const N=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:t.spacing(.5)}})),O=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:t.spacing(45.2),position:"relative"}})),_=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",width:t.spacing(12.5),height:t.spacing(12.5),padding:t.spacing(1),borderRadius:t.spacing(1.25),backgroundColor:"#bdbdbd",justifyContent:"center"}})),G=(0,h.Ay)("img")((()=>({cursor:"pointer",width:"100%",height:"100%",objectFit:"cover"}))),J=e=>{let{images:t,thumbnail:i,modelExists:r,selectVisualization:a}=e;const[s,l]=n.useState(t.length);return(0,n.useEffect)((()=>{l(r?t.length+1:t.length)}),[t,r]),s>1&&(0,F.jsx)(O,{children:(0,F.jsxs)(N,{children:[r&&(0,F.jsx)(_,{children:(0,F.jsx)(G,{src:i,alt:"Artifact",onClick:()=>a(-1)})}),t.map(((e,t)=>(0,F.jsx)(_,{children:(0,F.jsx)(G,{src:e,alt:"Artifact",onClick:()=>a(t)})},t)))]})})};var K=i(495);const Q=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",height:t.spacing(5.25)}})),U=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",gap:t.spacing(1)}})),X=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.spacing(1)}})),Y=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{width:t.spacing(83),[t.breakpoints.up("md")]:{width:t.spacing(106.5)},[t.breakpoints.up("xl")]:{width:t.spacing(140)},[t.breakpoints.up("xxl")]:{width:t.spacing(175.5)},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:t.spacing(1)}})),$=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(1),paddingTop:t.spacing(3),paddingBottom:t.spacing(3),backgroundColor:"#fff",[t.breakpoints.down("md")]:{width:t.spacing(83),minWidth:t.spacing(83)},[t.breakpoints.up("md")]:{width:t.spacing(104.5)},[t.breakpoints.up("lg")]:{marginTop:t.spacing(6.25),width:t.spacing(28),height:t.spacing(69),gap:t.spacing(1.7)},[t.breakpoints.up("xl")]:{width:t.spacing(34.25)},display:"flex",flexDirection:"column",gap:t.spacing(3)}})),ee=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{marginTop:t.spacing(3),paddingBottom:t.spacing(3),display:"flex",justifyContent:"center",flexWrap:"wrap",paddingRight:t.spacing(5),paddingLeft:t.spacing(5),gap:t.spacing(1),[t.breakpoints.up("lg")]:{gap:t.spacing(3)}}})),te=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",flexWrap:"wrap",flexDirection:"row",width:"100%",gap:t.spacing(1)}})),ie=(0,h.Ay)(l.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.tags.shape}})),ne=(0,h.Ay)(l.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.tags.culture}})),re=(0,h.Ay)(c.A)((e=>{let{theme:t}=e;return{width:t.spacing(13),height:t.spacing(8),variant:"rounded"}})),ae=(0,h.Ay)(c.A)((e=>{let{theme:t}=e;return{width:t.spacing(28),height:t.spacing(10),variant:"text"}})),se=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{width:"100%",height:t.spacing(75),backgroundColor:"#2e2d2c",display:"flex",justifyContent:"center",alignItems:"center"}})),le=()=>{const e=(0,W.Zp)(),{selectedArtifacts:t,toggleSelection:i,removeById:c}=(0,K.C)(),[h,u]=(0,n.useState)(!1),g=(0,W.zy)(),{token:x}=(0,H.r)(),{addAlert:m}=(0,M.i)(),j=!!x,{artifactId:f}=(0,W.g)(),[A,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!0),[w,k]=(0,n.useState)({attributes:{culture:{id:"",value:""},shape:{id:"",value:""},tags:[],description:""},thumbnail:"",model:{object:"",material:"",texture:""},images:[]}),[C,P]=(0,n.useState)({type:"",index:0});(0,n.useEffect)((()=>{fetch("".concat(V.y.DETAILED_ARTIFACT,"/").concat(f),{headers:{Authorization:"Bearer ".concat(x)}}).then((e=>{if(e.ok||404!==e.status)return e.json();b(!0)})).then((e=>{k(e),""!==e.model.object?(P({type:"model",index:-1}),console.log("model visualization")):(P({type:"image",index:0}),console.log("image visualization"))})).finally((()=>{v(!1);const e=t.some((e=>e.id==f));u(e),console.log("status: "+e)}))}),[f,x]);const z=async()=>{h?(console.log("eliminar artefacto"),c(parseInt(f)),u(!1)):(console.log("a\xf1adir artefacto"),i({id:parseInt(f,10),attributes:w.attributes,thumbnail:w.thumbnail}),u(!0))};return(0,F.jsx)(F.Fragment,{children:A?(0,F.jsx)(Z.A,{}):(0,F.jsxs)(ee,{children:[(0,F.jsxs)(Y,{children:[(0,F.jsxs)(Q,{children:[(0,F.jsx)(r.A,{variant:"h4",children:(0,F.jsxs)("b",{children:["Pieza ",w.id]})}),j?(0,F.jsxs)(U,{children:[(0,F.jsx)(a.A,{variant:"contained",onClick:z,children:h?(0,F.jsx)(F.Fragment,{children:"  Deseleccionar Pieza para descarga "}):(0,F.jsx)(F.Fragment,{children:" Seleccionar Pieza para descarga "})}),(0,F.jsx)(a.A,{variant:"contained",onClick:()=>{e("/catalog/".concat(f,"/edit"),{state:{from:g}})},children:"Editar Pieza"})]}):(0,F.jsx)(a.A,{variant:"contained",onClick:z,children:h?(0,F.jsx)(F.Fragment,{children:"  Deseleccionar Pieza para descarga "}):(0,F.jsx)(F.Fragment,{children:" Seleccionar Pieza para descarga "})})]}),y?(0,F.jsx)(se,{children:(0,F.jsx)(s.A,{color:"primary"})}):(0,F.jsx)(F.Fragment,{children:"image"===C.type?(0,F.jsx)(B,{imagePath:w.images[C.index]}):(0,F.jsx)(L,{objPath:w.model.object,mtlPath:w.model.material})}),(0,F.jsx)(J,{images:w.images,thumbnail:w.thumbnail,modelExists:!!w.model.object,selectVisualization:e=>{P(-1===e?{type:"model",index:-1}:{type:"image",index:e})}})]}),(0,F.jsxs)($,{children:[(0,F.jsx)(r.A,{children:y?(0,F.jsx)(ae,{}):w.attributes.description}),(0,F.jsxs)(U,{children:[(0,F.jsxs)(r.A,{variant:"h5",children:[(0,F.jsx)(o.A,{color:"inherit",fontSize:"small",style:{verticalAlign:"middle"}})," Forma:"," "]}),y?(0,F.jsx)(re,{}):(0,F.jsx)(ie,{label:w.attributes.shape.value})]}),(0,F.jsxs)(U,{children:[(0,F.jsxs)(r.A,{variant:"h5",children:[" ",(0,F.jsx)(d.A,{color:"inherit",fontSize:"small",style:{verticalAlign:"middle"}})," Cultura:"]}),y?(0,F.jsx)(re,{}):(0,F.jsx)(ne,{label:w.attributes.culture.value})]}),(0,F.jsxs)(X,{children:[(0,F.jsxs)(r.A,{variant:"h5",children:[(0,F.jsx)(p.A,{color:"inherit",fontSize:"small",style:{verticalAlign:"middle"}})," Etiquetas:"]}),(0,F.jsx)(te,{children:y?(0,F.jsx)(re,{}):w.attributes.tags.length>0?w.attributes.tags.map((e=>(0,F.jsx)(l.A,{label:e.value},e.id))):(0,F.jsx)("p",{children:"Sin etiquetas"})})]})]})]})})}}}]);
//# sourceMappingURL=315.3f32c53a.chunk.js.map